<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äººé¡æ€§åˆ¥éºå‚³æ©Ÿç‡æ¨¡æ“¬å¯¦é©—</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        .game-area {
            display: flex;
            justify-content: space-around;
            width: 100%;
            max-width: 600px;
            margin-bottom: 20px;
        }
        .cell-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .emoji-container {
            display: flex;
            align-items: center;
        }
        .emoji {
            font-size: 50px;
            margin-right: 10px;
        }
        .chromosome {
            font-weight: bold;
            font-size: 24px;
        }
        .cell {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            margin-top: 10px;
        }
        button {
            margin-top: 10px;
            padding: 5px 10px;
        }
        #result {
            margin-top: 20px;
            font-weight: bold;
            font-size: 18px;
        }
        table {
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid black;
            padding: 5px 10px;
            text-align: center;
        }
        #statistics {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>äººé¡æ€§åˆ¥éºå‚³æ©Ÿç‡æ¨¡æ“¬å¯¦é©—</h1>
    <div class="game-area">
        <div class="cell-container">
            <div class="emoji-container">
                <div class="emoji">ğŸ§”ğŸ»</div>
                <div class="chromosome">ç”·äºº(XY)</div>
            </div>
            <button id="spermBtn">ç”¢ç”Ÿç²¾ç´°èƒ</button>
            <div id="spermCell" class="cell"></div>
        </div>
        <div class="cell-container">
            <div class="emoji-container">
                <div class="emoji">ğŸ‘©ğŸ»</div>
                <div class="chromosome">å¥³äºº(XX)</div>
            </div>
            <button id="eggBtn">ç”¢ç”Ÿåµç´°èƒ</button>
            <div id="eggCell" class="cell"></div>
        </div>
    </div>
    <div id="result"></div>
    <div id="controls" style="display: none;">
        <button id="continueBtn">ç¹¼çºŒå¯¦é©—</button>
        <button id="endBtn">çµæŸå¯¦é©—</button>
        <button id="newResetBtn">é‡ç½®å¯¦é©—</button>
    </div>
    <div id="statistics"></div>
    <table id="resultTable">
        <tr>
            <th>ğŸ’•æ¨¡æ“¬å¯¦é©—</th>
            <th>ğŸ‘¦ğŸ»ç”·å­©(XY)</th>
            <th>ğŸ‘§ğŸ»å¥³å­©(XX)</th>
        </tr>
    </table>

    <script>
        let spermGenerated = false;
        let eggGenerated = false;
        let totalExperiments = 0;
        let totalBoys = 0;
        let totalGirls = 0;

        const spermBtn = document.getElementById('spermBtn');
        const eggBtn = document.getElementById('eggBtn');
        const spermCell = document.getElementById('spermCell');
        const eggCell = document.getElementById('eggCell');
        const result = document.getElementById('result');
        const controls = document.getElementById('controls');
        const continueBtn = document.getElementById('continueBtn');
        const endBtn = document.getElementById('endBtn');
        const newResetBtn = document.getElementById('newResetBtn');
        const resultTable = document.getElementById('resultTable');
        const statistics = document.getElementById('statistics');

        spermBtn.addEventListener('click', generateSperm);
        eggBtn.addEventListener('click', generateEgg);
        continueBtn.addEventListener('click', continueExperiment);
        endBtn.addEventListener('click', endExperiment);
        newResetBtn.addEventListener('click', resetExperiment);

        function generateSperm() {
            if (spermGenerated) {
                alert('åªèƒ½ç”¢ç”Ÿä¸€å€‹ç²¾ç´°èƒèˆ‡ä¸€å€‹åµç´°èƒå“¦ï¼');
                return;
            }
            const chromosome = Math.random() < 0.5 ? 'X' : 'Y';
            spermCell.style.backgroundColor = 'lightblue';
            spermCell.textContent = chromosome;
            spermGenerated = true;
            checkResult();
        }

        function generateEgg() {
            if (eggGenerated) {
                alert('åªèƒ½ç”¢ç”Ÿä¸€å€‹ç²¾ç´°èƒèˆ‡ä¸€å€‹åµç´°èƒå“¦ï¼');
                return;
            }
            eggCell.style.backgroundColor = 'pink';
            eggCell.textContent = 'X';
            eggGenerated = true;
            checkResult();
        }

        function checkResult() {
            if (spermGenerated && eggGenerated) {
                totalExperiments++;
                let babyGender;
                let babyEmoji;
                let babyChromosome;

                if (spermCell.textContent === 'X') {
                    babyGender = 'å¥³å­©';
                    babyChromosome = '(XX)';
                    totalGirls++;
                    babyEmoji = 'ğŸ‘§ğŸ»';
                } else {
                    babyGender = 'ç”·å­©';
                    babyChromosome = '(XY)';
                    totalBoys++;
                    babyEmoji = 'ğŸ‘¦ğŸ»';
                }

                result.innerHTML = `ä½ ç”Ÿå‡ºäº†ä¸€ä½å¯æ„›çš„${babyGender}${babyChromosome}å“¦ï¼ ${babyEmoji}`;
                controls.style.display = 'block';

                const newRow = resultTable.insertRow(-1);
                const cellCount = newRow.insertCell(0);
                const cellBoy = newRow.insertCell(1);
                const cellGirl = newRow.insertCell(2);

                cellCount.textContent = totalExperiments;
                cellBoy.textContent = babyGender === 'ç”·å­©' ? 'âœ“' : '';
                cellGirl.textContent = babyGender === 'å¥³å­©' ? 'âœ“' : '';

                updateStatistics();
            }
        }

        function continueExperiment() {
            resetCells();
            result.textContent = '';
            controls.style.display = 'none';
        }

        function endExperiment() {
            result.innerHTML = `<p>å¯¦é©—çµæŸï¼æœ€çµ‚çµ±è¨ˆæ•¸æ“šå¦‚ä¸‹ï¼š</p>`;
            updateStatistics();
            controls.style.display = 'block';
        }

        function resetExperiment() {
            resetCells();
            result.textContent = '';
            controls.style.display = 'none';
            totalExperiments = 0;
            totalBoys = 0;
            totalGirls = 0;
            while (resultTable.rows.length > 1) {
                resultTable.deleteRow(1);
            }
            updateStatistics();
        }

        function resetCells() {
            spermCell.style.backgroundColor = '';
            spermCell.textContent = '';
            eggCell.style.backgroundColor = '';
            eggCell.textContent = '';
            spermGenerated = false;
            eggGenerated = false;
        }

        function updateStatistics() {
            const boyProbability = totalExperiments > 0 ? (totalBoys / totalExperiments * 100).toFixed(2) : 0;
            const girlProbability = totalExperiments > 0 ? (totalGirls / totalExperiments * 100).toFixed(2) : 0;

            statistics.innerHTML = `
                <p>ğŸ’•å¯¦é©—ç¸½æ¬¡æ•¸: ${totalExperiments}æ¬¡</p>
                <p>ğŸ‘¦ğŸ»ç”·å­©å…± ${totalBoys} ä½</p>
                <p>ğŸ‘¦ğŸ»ç”Ÿå‡ºç”·å­©çš„æ©Ÿç‡: ${boyProbability}%</p>
                <p>ğŸ‘§ğŸ»å¥³å­©å…± ${totalGirls} ä½</p>
                <p>ğŸ‘§ğŸ»ç”Ÿå‡ºå¥³å­©çš„æ©Ÿç‡: ${girlProbability}%</p>
            `;
        }
    </script>
</body>
</html>